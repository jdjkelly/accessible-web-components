<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }

      .pink {
        color: #FF69B4;
      }

      .grey {
        color: #777872;
      }

      .inverse {
        background: #272822;
        color: #777872;
        text-shadow: 0 0 20px #333;
      }
      .inverse h1, .inverse h2 {
        color: #f3f3f3;
        line-height: 0.8em;
      }

      /* Two-column layout */
      .left-column {
        color: #777;
        width: 40%;
        height: 92%;
        float: left;
      }
      .left-column h2:last-of-type, .left-column h3:last-child {
        color: #000;
      }
      .right-column {
        width: 60%;
        float: right;
        padding-top: 1.5em;
      }
      code {
        -moz-border-radius: 5px;
        -web-border-radius: 5px;
        background: #e7e8e2;
        border-radius: 5px;
      }
      .remark-code {
        font-size: 22px;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .remark-code-line-highlighted     { background-color: #373832; }
    </style>
  </head>
  <body>
    <textarea id="source">
name: inverse
layout: true
class: center, middle, inverse
---
# Accessible Web Components?
???
I have purposefully stashed both spelling mistakes and code errors throughout this
 talk.
How many people have used Ember, React, Angular?
---
# I'm @jdjkelly
---
# I work at Uniiverse
???
- Really, this talk is misnamed. It should be...
---
# <span class="pink">Accessible!</span> Web Components
???
- That's because we should be excited about web accessibility. Unfortunately we tend to think of...
---
# Accessible?
## Legal Obligations
???
- Well yeah... but more importantly...
---
# <span class="pink">Accessible!</span>
## <strike class="grey">Legal Obligations</strike> Ethical Opportunities
---
layout: false
.left-column[
  # Opportunity!
]
.right-column[
  What sorts of opportunities do accessible web components create?

  - Powerful assistive tools become drammatically more useful to end users

  - Useful assistive tools create independence and choice for those who need them

  <span class="grey">*Bonus: We can use JavaScript to build apps in technology-sticky areas like government and banking</span>
]
---
layout: false
.left-column[
  # Obligations?
]
.right-column[
  Many jurisdictions have web accessibility laws. 

  If you're in Ontario, and your org has > 50 employees - then all "web sites" launched after January 1 have to "conform with WCAG 2.0 Level A"*
]

<small style="float:left;">http://www.e-laws.gov.on.ca/html/source/regs/english/2011/elaws_src_regs_r11191_e.htm#BK15</small>

---
layout: true
class: center, middle, inverse
---
# I'm not a lawyer
???
- Go see one if that rings alarm bells.
---
# :)
???
- This talk has three parts...
---
# What makes a user interface accessible?
---
### What makes a user interface accessible?
# What's a web component?
---
### What makes a user interface accessible?
### What's a web component?
# How do we make accessible web components?
---
layout: true
class: center, middle
---
## <span class="grey">Accessible UIs</span> have broad input device support
???
- Q. What is broad input device support?
- A. It means that your UI should be usable with all of the input devices available to the user (touch gestures, mouse and keyboard inputs). It means treating them as equal points of access.
- Q. Why is this necessary for accessibility?
- A. A user who relies on assistive technology may have limited mobility or vision, and might rely upon using only a keyboard (or some device that mimics keyboard inputs)
---
## <span class="grey">Accessible UIs</span> support for the WAI-ARIA spec
???
- Web Accessibility Initiative 
- Accessible Rich Internet Applications 1.0 W3C Recommendation
- ARIA is really just a way of annotating HTML elements in the DOM.
"For example, web application developers create collapsible tree widgets in HTML 
using CSS and JavaScript even though HTML has no semantic tree element. To a 
non-disabled user, it may look and act like a collapsible tree widget, but 
without appropriate semantics, the tree widget may not be perceivable to, or 
operable by, a person with a disability because assistive technologies may not 
recognize the role."
---
layout: true
class: center, middle, inverse
---
# ARIA Architecture
---
# DOM attributes (defined by ARIA)
# &#8595;
# Browser  
# &#8595;
# OS Accessiblity API
# &#8595;
# Assistive technologies
---
# DOM attributes (defined by ARIA)
# &#8595;
# Browser  
# &#8595;
# OS Accessiblity API
# &#8595;
# <span class="pink">Assistive technologies</span>
---
# Assistive technologies? 
---
# âŒ˜ + F5
???
- Assistive technologies are things like screen readers
- Open up voice over on a mac
- Demo NYTimes.com
---
# <span class="pink">DOM attributes</span> (defined by ARIA)
# &#8595;
# Browser  
# &#8595;
# OS Accessiblity API
# &#8595;
# Assistive technologies
---
# Roles, States, and  Properties
---
layout: true
class: middle
---
```xml
<div role="checkbox" 
     aria-checked="true" 
     aria-label="Avez-vous les tacos?" 
     tabindex="0">
</div>
```
---
```xml
*<div role="checkbox" 
     aria-checked="true" 
     aria-label="Avez-vous les tacos?" 
     tabindex="0">
</div>
```
???
- "The role attribute, borrowed from the, Role Attribute [ROLE], allows the author to annotate host languages with machine-extractable semantic information about the purpose of an element. It is targeted for accessibility, device adaptation, server-side processing, and complex data description."
- ARIA gives us lots of roles to work with. The most basic roles can "act as standalone user interface widgets or as part of larger, composite widgets":

alert alertdialog button checkbox dialog gridcell link log marquee menuitem menuitemcheckbox 
menuitemradio option progressbar radio scrollbar slider spinbutton status tab tabpanel 
textbox timer tooltip treeitem

-We also have access to complex roles, with child-role relationships:

combobox grid listbox menu menubar radiogroup tablist tree treegrid
---
```xml
<div role="checkbox" 
*     aria-checked="true" 
     aria-label="Avez-vous les tacos?" 
     tabindex="0">
</div>
```
---
```xml
<div role="checkbox" 
     aria-checked="true" 
*     aria-label="Avez-vous les tacos?" 
     tabindex="0">
</div>
```
---
```xml
<div role="checkbox" 
     aria-checked="true" 
     aria-label="Avez-vous les tacos?" 
*     tabindex="0">
</div>
```
---
```xml
<div role="menu" aria-expanded="true">
   <div role="menuitem">Oui</div>
   <div role="menuitem">Non</div>
</div>
```
???
- This illustrates another role, a state, and hierarchy
---
layout: true
class: middle, center, inverse
---
### What makes a user interface accessible?
# What's a web component?
### How do we make accessible web components?
---
# Squishy def'n
???
So lets talk about web components.
What's a web component?
We hear the phrase alot but it turns out that it has a really squishy meaning. 
---
### Formal def'n
# Custom Elements + Shadow DOM + Imports
???
- Custom Elements
- Shadow DOM (sort of like an iFrame without the frame)
- HTML Imports (templating)
---
## Custom Elements
```xml
<vespene-gas></vespene-gas>
```
???
- Custom elements with custom tag names
---
## Shadow DOM
```xml
<vespene-gas>
  #shadow-root
    <refinery>
          138 remaining
     </refinery>
 </vespene-gas>
```
???
- Encapsulation of the DOM inside a shadow-root. Sort of like an Iframe.
- Event model where some events can cross the shadow boundry on some cannot
---
## Imports
```xml
  <link rel="import" href="vespene-gas-template.html">
```
```xml
                       <!-- vespene-gas-template.html-->
<template>
                  <refinery>
                   </refinery>
 </template>
```
???
We can import HTML fragments, and define templates using the new `<template>`tag
We can clone the templates and attach them the shadow root of a custom element.
String it all together and you've got yourself a web component.
---
### Informal def'n
## React.createClass()
## Ember.Component.extend()
## Angular.directive()
???
- We can think of these as proto-components
- They're capable of generating reusable DOM fragments, with custom elements, 
  and some degree of encapsulation
- Oh, and all three have tons of in-production examples today
- Long term, Ember.Component is designed to produce 'native' Web Components, 
  I imagine other frameworks/libs will follow suit.
---
### What makes a user interface accessible?
### What's a web component?
# How do we make accessible web components?
???
- Demo <a href="/examples/inaccessible-ember-component.html">/examples/inaccessible-ember-component.html</a>
- Use Safari, there are some bugs in Chrome
- Show click functionality
- Attempt VoiceOver - prove it sucks
---
layout: true
class: middle
---
## <span class="grey">One</span> Create the class/component/directive
---
## Ember.js: Define the Component
### components/boolean-pill.js 
```javascript
App.BooleanPillComponent = Ember.Component.extend({
  tagName: 'boolean-pill',
  value: false,
  classNameBindings: ['value:true:false'],
  
  click: function() {
    this.toggleProperty('value');
  }
});
```
### templates/components/boolean-pill.hbs
```xml
<span class="side top">Yes</span>
<span class="side front">No</span>
```
---
## <span class="grey">Two</span> Assign ARIA role and properties
---
## Ember.js: Assign ARIA role and properties
```javascript
App.BooleanPillComponent = Ember.Component.extend({
  tagName: 'boolean-pill',
  value: false,
  classNameBindings: ['value:true:false'],
      
*  attributeBindings: ['ariaLabel:aria-label', 
*                      'tabindex'],
*  tabindex: 0,
*  ariaRole: 'checkbox',
*  ariaLabel: 'Turn off?',

  click: function() {
    this.toggleProperty('value');
  }
});
```
???
- ariaRole is automatically mapped to the role Attribute by Ember
- lolbutwhy? Confusing.
- we can arbitrarily output HTML on output
---
## <span class="grey">Three</span> Bind ARIA states
---
## Ember.js: Bind ARIA states
```javascript
App.BooleanPillComponent = Ember.Component.extend({
  tagName: 'boolean-pill',
  value: false,
  classNameBindings: ['value:true:false'],
      
  attributeBindings: ['ariaLabel:aria-label', 
*                      'ariaChecked:aria-checked',
                      'tabindex'],
  ...

*  ariaChecked: function() {
*    return '' + this.get('value')
*  }.property('value'),

  ...

}); 
```
---
## <span class="grey">Four</span> Create cross-input device event handlers
---
## Ember.js: Cross-input device event handlers
```javascript
App.BooleanPillComponent = Ember.Component.extend({
  ...

  toggleVal: function() {
    this.toggleProperty('value');
  },

  click: function() {
    this.toggleVal();
  },

  keyDown: function(event) {
    switch (event.keyCode) {
      case 13:
      case 32:
      case 37:
      case 38: 
      case 39:
      case 40:
        this.toggleVal();
        break;
    }
  },

});
```
---
# <a href="/examples/accessible-ember-component.html">Demo</a>
---
# <a href="/examples/accessible-react-component.html">React</a>
---
## React: Define the Component
```javascript
var BooleanPill = React.createClass({
  getDefaultProps: function() {
    return { value: false };
  },

  handleClick: function() {
    var val = this.props.value ? false : true;

    this.setProps({value: val});
  },

  render: function() {
    var classNames = 'boolean-pill ' + this.props.value;

    return (
      <div className={classNames} 
           onClick={this.handleClick}
        ...
      </div>
    );
  }
});
```
---
## React: Assign ARIA roles and properties
```javascript
var BooleanPill = React.createClass({
  ...

  render: function() {
    var classNames = 'boolean-pill ' + this.props.value;

    return (
      <div className={classNames} 
           onClick={this.handleClick}
*           tabIndex="0"
*           role="checkbox"
*           aria-label="Turn off?">
        ...
      </div>
    );
  }

});
```
???
- What's with React's support for aria-* in JSX instead of aria^*?
---
## React: Bind ARIA states
```javascript
var BooleanPill = React.createClass({
  ...

  render: function() {
    var classNames = 'boolean-pill ' + this.props.value;

    return (
      <div className={classNames} 
           onClick={this.handleClick}
           tabIndex="0"
           role="checkbox"
           aria-label="Turn off?"
*           aria-checked={this.props.value}>
        ...
      </div>
    );
  }

});

```
---
## React: Cross-input device event handlers
```javascript
var BooleanPill = React.createClass({

*  toggleVal: function() {
    var val = this.props.value ? false : true;

    this.setProps({value: val});
  },

*  handleClick: function(event) {
    this.toggleVal();
  },

*  handleKeyDown: function(event) {
    switch (event.keyCode) {
      case 13:
      case 32:
      case 37:
      case 38: 
      case 39:
      case 40:
        this.toggleVal();
        break;
    }
  } 

  ...
``` 
---
```javascript
  render: function() {
    var classNames = 'boolean-pill ' + this.props.value;

    return (
      <div className={classNames} 
*           onClick={this.handleClick}
*           onKeyDown={this.handleKeyDown}></div>
    );
  }

});

```
---
# <a href="/examples/accessible-angular-directive.html">Angular</a>
???
- Feel free to check out the angular implementation. It's very similar - we're just creating a transcluded, isolate-scoped .directive()
- JK super easy, looks like this...
---
```javascript
<boolean-pill
    ng-class="[value]"
*    ng-keydown="handleKeydown($event)"
*    ng-click="handleClick()"
*    role="checkbox"
*    aria-label="Turn off?"
*    ng-attr-aria-checked="{{value}}"
*    tabindex="0">
  <span class="side top">On</span>
  <span class="side front">Off</span>
</boolean-pill>
```
???
- That's a directive template defined in line
- You can use the ng-attr directive to do the ARIA
- Handle the click/keydown events in a controller, and update the value
---
layout: true
class: middle, center, inverse
---
# tl:dr;
---
## Use your JavaScript lib/framework to render 
## ARIA roles, properties, and states to the DOM
---
# Thanks
### @marcysutton
### @uniiverse
### @torontojs
### <a class="pink" href="github.com/jdjkelly/accessible-web-components">github.com/jdjkelly/accessible-web-components</a>
???
Random other closing notes:
- lots of stupid browser bugs
- control+option+space vs space
- neither Firefox nor Chrome recognize that space should trigger the changed event (they don't)
- control+option+space behaves differently in Chrome, reading the un/check event (correct),  vs. Firefox, always assuming 'check' (incorrect)
- Two PRs in Angular: https://github.com/angular/angular.js/issues/5486 and https://github.com/angular/angular.js/pull/8342
---
# Hey, Ember.js looks cool!
## <a class="pink" href="https://unspace.ca/embergarten/">Embergarten</a>
## September 13
  </textarea>
    <script src="remark-latest.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create({
        highlightStyle: 'monokai',
        highlightLanguage: 'remark'      
      });
    </script>
  </body>
</html>
